<div [formGroup]="profileFilterForm">
  <div class="filter p-4 mt-3">
    <div class="badge-div me-4">
      <button
        mat-raised-button
        class="success-button"       
      >
        Təsdiqlənən
      </button>
      <span class="badge-span success-button">556678</span>
    </div>

    <div class="badge-div me-4">
      <button
        mat-raised-button
        class="await-button"       
      >
      Gözləyən
      </button>
      <span class="badge-span await-button">558</span>
    </div>

    <div class="badge-div me-4">
      <button
        mat-raised-button
        class="reject-button"       
      >
        Təsdiqlənməyən
      </button>
      <span class="badge-span reject-button">8</span>
    </div>
  </div>
  <div class="filter p-4">
    <mat-form-field appearance="outline">
      <mat-label>Profillər</mat-label>
      <mat-select formControlName="OnlyNotConsidered">
        <mat-option [value]="null"> Hər ikisi </mat-option>
        <mat-option [value]="true"> Baxılan </mat-option>
        <mat-option [value]="false"> Baxılmayan </mat-option>
      </mat-select>
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>Ad</mat-label>
      <input matInput formControlName="name" />
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>Soyad</mat-label>
      <input matInput formControlName="surname" />
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>Ata adı</mat-label>
      <input matInput formControlName="middleName" />
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>Telefon</mat-label>
      <input matInput formControlName="phone" />
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>Pin</mat-label>
      <input matInput formControlName="pin" />
    </mat-form-field>
  </div>
</div>

<div>
  <ng-container *ngIf="!tableLoading; else loading">
    <table
      mat-table
      [dataSource]="dataSource"
      multiTemplateDataRows
      class="mat-elevation-z8"
    >
      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef>ID</th>
        <td mat-cell *matCellDef="let element">{{ element?.id }}</td>
      </ng-container>

      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef>Ad</th>
        <td mat-cell *matCellDef="let element">{{ element?.name }}</td>
      </ng-container>

      <ng-container matColumnDef="surname">
        <th mat-header-cell *matHeaderCellDef>Soyad</th>
        <td mat-cell *matCellDef="let element">
          {{ element?.surname }}
        </td>
      </ng-container>

      <ng-container matColumnDef="middleName">
        <th mat-header-cell *matHeaderCellDef>Ata adı</th>
        <td mat-cell *matCellDef="let element">{{ element?.middleName }}</td>
      </ng-container>

      <ng-container matColumnDef="phone">
        <th mat-header-cell *matHeaderCellDef>Telefon</th>
        <td mat-cell *matCellDef="let element">
          {{ element?.phone }}
        </td>
      </ng-container>

      <ng-container matColumnDef="pin">
        <th mat-header-cell *matHeaderCellDef>Pin</th>
        <td mat-cell *matCellDef="let element">{{ element?.pin }}</td>
      </ng-container>

      <ng-container matColumnDef="birthDate">
        <th mat-header-cell *matHeaderCellDef>Doğum tarixi</th>
        <td mat-cell *matCellDef="let element">
          {{ element?.birthDate | date: "YYYY-MM-dd" }}
        </td>
      </ng-container>

      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef>Status</th>
        <td mat-cell *matCellDef="let element">
          <div>
            <button
              *ngIf="element?.avatarConfirmationStatus"
              mat-raised-button
              class="await-button me-2 my-1"
              [ngClass]="{
                'success-button': statusColor(
                  element,
                  'avatarConfirmationStatus',
                  3
                ),
                'reject-button': statusColor(
                  element,
                  'avatarConfirmationStatus',
                  2
                )
              }"
            >
              Profil
            </button>
            <button
              *ngIf="element?.idCardConfirmationStatus"
              mat-raised-button
              class="await-button me-2 my-1"
              [ngClass]="{
                'success-button': statusColor(
                  element,
                  'idCardConfirmationStatus',
                  3
                ),
                'reject-button': statusColor(
                  element,
                  'idCardConfirmationStatus',
                  2
                )
              }"
            >
              Şəxsiyyət vəsiqəsi
            </button>
            <button
              *ngIf="element?.driverLicenseConfirmationStatus"
              mat-raised-button
              class="await-button me-2 my-1"
              [ngClass]="{
                'success-button': statusColor(
                  element,
                  'driverLicenseConfirmationStatus',
                  3
                ),
                'reject-button': statusColor(
                  element,
                  'driverLicenseConfirmationStatus',
                  2
                )
              }"
            >
              Sürücülük vəsiqəsi
            </button>
            <button
              *ngIf="element?.passportConfirmationStatus"
              mat-raised-button
              class="await-button me-2 my-1"
              [ngClass]="{
                'success-button': statusColor(
                  element,
                  'passportConfirmationStatus',
                  3
                ),
                'reject-button': statusColor(
                  element,
                  'passportConfirmationStatus',
                  2
                )
              }"
            >
              Pasport
            </button>
          </div>
        </td>
      </ng-container>

      <!-- Expanded Content Column - The detail row is made up of this one column that spans across all columns -->
      <ng-container matColumnDef="expandedDetail">
        <td
          mat-cell
          *matCellDef="let element"
          [attr.colspan]="columnsToDisplay.length"
        >
          <div
            class="example-element-detail"
            [@detailExpand]="
              element == expandedElement ? 'expanded' : 'collapsed'
            "
          >
            <div class="actions d-flex align-items-center">
              <mat-icon [routerLink]="element.id">edit</mat-icon>
            </div>
            <div class="profile-img">
              <div class="profile">
                <img src="/assets/img/icons/default/passport.jpg" />
              </div>
              <div class="passport">
                <img src="/assets/img/icons/default/passport.jpg" />
              </div>
            </div>
          </div>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
      <tr
        mat-row
        *matRowDef="let element; columns: columnsToDisplay"
        class="example-element-row"
        [class.example-expanded-row]="expandedElement === element"
        (click)="expandedElement = expandedElement === element ? null : element"
      ></tr>
      <tr
        mat-row
        *matRowDef="let row; columns: ['expandedDetail']"
        class="example-detail-row"
      ></tr>
      <tr class="mat-row" *matNoDataRow>
        <td class="mat-cell" colspan="9999">Məlumat yoxdur</td>
      </tr>
    </table>
    <mat-paginator
      [length]="length"
      showFirstLastButtons
      [pageIndex]="profileFilterForm.value.PageNumber - 1"
      [pageSizeOptions]="[5, 10, 20, 100]"
      [pageSize]="profileFilterForm.value.PageSize"
      (page)="onChangePage($event)"
    >
    </mat-paginator>
  </ng-container>

  <ng-template #loading>
    <div class="table-loading">
      <mat-spinner></mat-spinner>
    </div>
  </ng-template>
</div>
